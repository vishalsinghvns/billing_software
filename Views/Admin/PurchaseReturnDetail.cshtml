@model Preora.Models.PurchaseReturnVM
@{
    ViewBag.Title = "PurchaseReturnDetail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
<style>
    #container {
        text-align: center
    }

    #employee-table {
        border: 1px solid #aaa
    }
</style>
<div class="col-md-6 mt-4 mb-1 text-right">
    <a href="javascript:void(0);" class="btn btn-danger bx bxs-file-pdf" id="btnPDF">PDF</a>
    <a href="javascript:void(0);" class="btn btn-primary" onclick="printContent('dvmismatch')">Print</a>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="card">
            @foreach (var item in Model.BillVM)
            {
                <div id="dvmismatch" class="printArea">
                    <div class="card-header bg-info">
                        <h4 class="mb-0 text-white">Purchase Return Detail</h4>
                    </div>
                    <div class="card-body p-4">
                        <div class="row">
                            <div class="col-lg-6 col-6">
                                @Html.HiddenFor(x => item.id)

                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <label class="control-label">Supplier Name :</label>
                                        @Html.DisplayFor(x => item.PR_suppName, new { @class = "form-control" })

                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <label class="control-label">Invoice Number :</label>
                                        @Html.DisplayFor(x => item.PR_invoiceno, new { @type = "text", @class = "form-control" })

                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <label class="control-label">Date :</label>
                                        @Html.DisplayFor(x => item.PR_billdate, new { @type = "date", @class = "form-control" })
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="mb-3">
                                        <label class="control-label">Due Date :</label>
                                        @Html.DisplayFor(x => item.PR_duedate, new { @type = "date", @class = "form-control" })
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-6 text-right">
                                <center><img src="/CompanyImg/@Model.CompLogo" class="rounded-circle" style="width:100px;height:70px;" /></center>
                                <center>
                                    <h4 class="mt-3">@Model.CompName</h4>
                                    <p class="mb-0"><strong>Email:</strong> @Model.CompEmail</p>
                                    <p class="mb-0"><strong>Mobile No.-</strong> @Model.CompPhone1</p>
                                </center>
                            </div>
                        </div>
                        <div class="row mt-2 mb-2" id="container">
                            <div class="table-responsive">
                                <table class="table table-bordered" style="padding: 10px; margin-top: 10px; margin-bottom: 10px;">
                                    <tr>
                                        <th>Product</th>
                                        <th>Quantity</th>
                                        <th>Unit</th>
                                        <th>Rate</th>
                                        <th>Gross Amt.</th>
                                        <th>Discount</th>
                                        <th>SGST</th>
                                        <th>CGST</th>
                                        <th>IGST</th>
                                        <th>HSN/SAC</th>
                                        <th>Amount</th>

                                    </tr>
                                    @foreach (var prd in Model.productVM)
                                    {
                                        <tr>
                                            <td>@prd.PR_prod_name</td>
                                            <td>@prd.PR_item_qty</td>
                                            <td>@prd.PR_measureunit</td>
                                            <td>@prd.PR_item_rate</td>
                                            <td>@prd.PR_gross_amt</td>
                                            <td>@prd.PR_disc_amt</td>
                                            <td>@prd.PR_sgst_amt</td>
                                            <td>@prd.PR_cgst_amt</td>
                                            <td>@prd.PR_igst_amt</td>
                                            <td>@prd.PR_HSN_SAC</td>
                                            <td>@prd.PR_finalprod_amt</td>
                                        </tr>

                                    }
                                </table>
                            </div>
                        </div>

                        <div class="row">

                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">Gross Amount :</label>
                                    @Html.DisplayFor(x => item.PR_GrossAmt, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">Discount :</label>
                                    @Html.DisplayFor(x => item.PR_Discount, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">Additional Disc :</label>
                                    @Html.DisplayFor(x => item.PR_AdditionalDisc, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">SGST :</label>
                                    @Html.DisplayFor(x => item.PR_S_GST, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">CGST :</label>
                                    @Html.DisplayFor(x => item.PR_C_GST, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">IGST :</label>
                                    @Html.DisplayFor(x => item.PR_I_GST, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">Loading & Unloading Charge :</label>
                                    @Html.DisplayFor(x => item.PR_LoadingCharge, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">Final Amount :</label>
                                    @Html.DisplayFor(x => item.PR_FinalAmt, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">Paid Amount :</label>
                                    @Html.DisplayFor(x => item.PR_PaidAmt, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">Balance Amount :</label>
                                    @Html.DisplayFor(x => item.PR_BalanceAmt, new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="mb-2">
                                    <label class="control-label">Pay Mode :</label>
                                    @Html.DisplayFor(x => item.PR_pay_mode, new { @class = "form-control" })
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>


<script>
    function printContent(el) {
        var restorepage = document.body.innerHTML;
        var printcontent = document.getElementById(el).innerHTML;
        document.body.innerHTML = printcontent;
        window.print();
        document.body.innerHTML = restorepage;
    }
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.22/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
<script type="text/javascript">
    $("body").on("click", "#btnPDF", function () {
        html2canvas($('.printArea')[0], {
            onrendered: function (canvas) {
                var data = canvas.toDataURL();
                var docDefinition = {
                    content: [{
                        image: data,
                        width: 500
                    }]
                };
                pdfMake.createPdf(docDefinition).download("purchase-entry-Details.pdf");
            }
        });
    });
</script>